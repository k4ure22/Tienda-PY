{% load static %}
<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <title>Registro de Computador</title>
  <link rel="stylesheet" href="{% static 'core/general.css' %}">
  <link rel="stylesheet" href="{% static 'core/formularios.css' %}">

  <script>
    function mostrarOtro() {
      const select = document.getElementById("marca");
      const otroInput = document.getElementById("otra-marca-div");
      if (select.value === "Otro") {
        otroInput.style.display = "block";
      } else {
        otroInput.style.display = "none";
      }
    }
  </script>
</head>

<body>
  <header class="topbar">
    <div class="topbar-left">
      <h2 class="topbar-logo">Computadores</h2>

      <form action="{% url 'productos' %}" method="get" class="topbar-search">
        <input type="text" name="q" placeholder="Buscar productos..." value="{{ query|default_if_none:'' }}">
        <button type="submit">🔍</button>
      </form>
    </div>

    <div class="topbar-center"> 
      <span class="topbar-title">Crear</span>
    </div>

    <div class="topbar-right">
      <a href="{% url 'solicitudes' %}" class="icon-btn" title="Notificaciones">🔔</a>

      {% if request.user.is_authenticated %}
      <a href="{% url 'perfil_usuario' request.user.id %}" class="user-chip">
        {% if request.user.foto_perfil %}
        <img src="{{ request.user.foto_perfil.url }}" alt="Foto de perfil" class="avatar">
        {% else %}
        <img src="{% static 'core/img/default-user.png' %}" alt="Foto de perfil" class="avatar">
        {% endif %}
        <span class="user-name">{{ request.user.nombre|default:request.user.email }}</span>
      </a>
      <a href="{% url 'logout' %}" class="pill pill-red">Cerrar sesión</a>
      {% else %}
      <a href="{% url 'login' %}" class="pill">Iniciar sesión</a>
      {% endif %}
    </div>
  </header>
  <main>

    <form class="form-computador" method="POST" enctype="multipart/form-data">
      {% csrf_token %}
      <div class="form-header">
  <a href="{% url 'productos' %}" class="pill pill-blue">Volver</a>
  <h1>Registro de Computador</h1>
  <a href="{% url 'cargar_excel' %}" class="pill pill-green">Cargar Excel</a>
</div>



      <!-- Marca -->
      <div class="form-group">
        <label for="marca">Marca:</label>
        <select name="marca" id="marca" onchange="mostrarOtro()" required>
          <option value="">Seleccione...</option>
          {% for m in marcas %}
          <option value="{{ m }}">{{ m }}</option>
          {% endfor %}
          <option value="Otro">Otro</option>
        </select>
      </div>

      <!-- Otra marca -->
      <div id="otra-marca-div" class="form-group" style="display:none;">
        <label for="otra_marca">Escriba la marca:</label>
        <input type="text" name="otra_marca" id="otra_marca">
      </div>

      <!-- Serial -->
      <div class="form-group">
        <label for="serial">Identificación (Serial o código interno):</label>
        <input type="text" name="serial" id="serial" required>
      </div>

      <!-- Modelo -->
      <div class="form-group">
        <label for="modelo">Modelo:</label>
        <input type="text" name="modelo" id="modelo" required>
      </div>

      <!-- Precio -->
      <div class="form-group">
        <label for="precio">Precio:</label>
        <input type="number" name="precio" id="precio" step="0.01" min="0" required>
      </div>

      <!-- Color -->
      <div class="form-group">
        <label for="color">Color:</label>
        <input type="text" name="color" id="color">
      </div>

      <!-- RAM -->
      <div class="form-group">
        <label for="ram">RAM (GB):</label>
        <input type="number" name="ram" id="ram" min="1" required>
      </div>

      <!-- Almacenamiento -->
      <div class="form-group">
        <label for="almacenamiento">Almacenamiento (GB):</label>
        <input type="number" name="almacenamiento" id="almacenamiento" min="1" required>
      </div>

      <!-- Procesador -->
      <div class="form-group">
        <label for="procesador">Procesador:</label>
        <input type="text" name="procesador" id="procesador" required>
      </div>

      <!-- Detalles -->
      <div class="form-group form-full">
        <label for="detalles">Detalles adicionales:</label>
        <textarea name="detalles" id="detalles" rows="4"></textarea>
      </div>

      <!-- Imagen -->
      <div class="form-group form-full">
        <label for="imagen">Imagen del computador:</label>
        <input type="file" name="imagen" id="imagen" accept="image/*">
      </div>

      <!-- Botón -->
      <div class="form-actions">
        <button type="submit">Registrar Computador</button>
      </div>
    </form>

    <script>
      function mostrarOtro() {
        const select = document.getElementById("marca");
        const otroInput = document.getElementById("otra-marca-div");
        if (select.value === "Otro") {
          otroInput.style.display = "block";
        } else {
          otroInput.style.display = "none";
        }
      }
    </script>
  </main>

</body>

</html>